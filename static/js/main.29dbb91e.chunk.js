(this.webpackJsonprepoviewrreact=this.webpackJsonprepoviewrreact||[]).push([[0],{170:function(e,t,n){e.exports=n(298)},175:function(e,t,n){},177:function(e,t,n){},298:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(29),c=n.n(l),o=(n(175),n(155)),u=n(13),i=n.n(u),s=n(30),m=n(10),h=n(309),f=n(312),d=n(313),E=n(311),g=(n(177),n(178),n(133)),p=n.n(g),v=n(153),b=n(314);var y=n(85),w=n.n(y),C=n(134),O=n(297).Octokit,j=null,k=null,S=null,A=[],F=null;function H(e,t,n){var a=function(e){var t=new O;return new Promise((function(n,a){return t.users.getByUsername({username:e}).then((function(){n({value:!0,err:"",val:e,type:"Author"})})).catch((function(t){a({value:!1,err:t,val:e,type:"Author"})}))})).catch((function(e){return e}))}(e),r=function(e,t){var n=new O;return new Promise((function(a,r){return n.request("GET /repos/".concat(e,"/").concat(t)).then((function(){a({value:!0,err:"",val:t,type:"Repository"})})).catch((function(e){console.log(e),r({value:!1,err:e,val:t,type:"Repository"})}))})).catch((function(e){return e}))}(e,t),l=function(e,t,n){var a=new O({auth:n});return a.log=console,new Promise((function(r,l){return a.repos.listCommits({owner:e,repo:t}).then((function(){r({value:!0,err:"",val:n,type:"Authenicator"})})).catch((function(e){l({value:!1,err:e,val:n,type:"Authenicator"})}))})).catch((function(e){return e}))}(e,t,n);return Promise.all([a,r,l]).then((function(e){return console.log(e),e})).catch((function(e){return console.log(e),e}))}function x(){var e=Object(a.useState)([]),t=Object(m.a)(e,2),n=t[0],l=t[1],c=Object(a.useState)(!1),u=Object(m.a)(c,2),i=u[0],s=u[1];Object(a.useEffect)((function(){var e=k,t=S;return j.repos.listCommits({owner:e,repo:t}).then((function(e){e.data.forEach((function(e){A.push(e.sha)}))})).finally((function(){A.forEach((function(n){j.request("GET /repos/".concat(e,"/").concat(t,"/commits/").concat(n)).then((function(e){var t=e.data;l((function(e){return[].concat(Object(o.a)(e),[{date:w()(t.commit.author.date).format("MMM Do YY"),parents:t.parents,author:t.author.login,files:t.files,stats:t.stats}])}))})).finally((function(){s(!0)})).catch((function(e){console.log(e)}))}))})),F=new p.a(document.getElementById("canvas"),{type:"bar",data:{labels:null,datasets:[{label:"Number of changes",backgroundColor:"#FFFFFF",data:null}]},options:{legend:{display:!1},title:{display:!0,text:"File Changes"}}}),function(){}}),[]);var h=r.a.createElement("div",{id:"table"},r.a.createElement(R,{commits:n}));return r.a.createElement("div",{className:"mainContainer"},i?h:null,r.a.createElement("div",null,r.a.createElement("canvas",{id:"canvas"})))}function P(e,t){e.current.style.backgroundColor="In"==t?"lightgray":"white"}function M(e,t){!function(e,t){var n=0;e.forEach((function(e){e.changes>n&&(n=e.changes)})),console.log(n);var a=v.a(b.a).domain([0,n]);e.sort((function(e,t){return t.changes-e.changes}));var r=[],l=[],c=[];e.forEach((function(e){e.name.length>20?r.push(e.name.slice(e.name.length-20,e.name.length)):r.push(e.name),l.push(e.changes),c.push(a(e.changes))})),t.data.datasets[0].backgroundColor=c,t.data.datasets[0].data=l,t.data.labels=r,t.update()}(e.files.map((function(e){return{name:e.filename,changes:e.changes}})),F),"gray"==t.current.style.backgroundColor?t.current.style.backgroundColor="darkgray":t.current.style.backgroundColor="gray"}function R(e){var t=Object(C.a)(),n=Object(m.a)(t,2),a=n[0],l=n[1];return r.a.createElement(E.a,null,r.a.createElement(E.a.Header,null,r.a.createElement(E.a.Row,null,r.a.createElement(E.a.HeaderCell,null,"Author"),r.a.createElement(E.a.HeaderCell,null,"Date"),r.a.createElement(E.a.HeaderCell,null,"Changes"),r.a.createElement(E.a.HeaderCell,null,"Additions"),r.a.createElement(E.a.HeaderCell,null,"Deletions"),r.a.createElement(E.a.HeaderCell,null,"Files"))),r.a.createElement(E.a.Body,null,e.commits.map((function(e,t){return r.a.createElement("tr",{key:t,ref:l(t.toString()),onMouseEnter:function(e){return P(a(t.toString()),"In")},onMouseLeave:function(e){return P(a(t.toString()),"Out")},onClick:function(){return M(e,a(t.toString()))}},r.a.createElement(E.a.Cell,null,e.author),r.a.createElement(E.a.Cell,null,e.date),r.a.createElement(E.a.Cell,null,e.stats.total),r.a.createElement(E.a.Cell,null,e.stats.additions),r.a.createElement(E.a.Cell,null,e.stats.deletions),r.a.createElement(E.a.Cell,null,e.files.length))}))))}var B=function(){var e=Object(a.useState)(""),t=Object(m.a)(e,2),n=t[0],l=t[1],c=Object(a.useState)(""),o=Object(m.a)(c,2),u=o[0],E=o[1],g=Object(a.useState)(""),p=Object(m.a)(g,2),v=p[0],b=p[1],y=Object(a.useState)(!1),w=Object(m.a)(y,2),C=w[0],A=w[1],F=Object(a.useState)(null),P=Object(m.a)(F,2),M=P[0],R=P[1],B=Object(a.useState)(!1),D=Object(m.a)(B,2),I=D[0],G=D[1],T=r.a.createElement("div",{id:"info"},r.a.createElement(h.a,null,r.a.createElement(f.a,null,r.a.createElement(h.a.Field,null,r.a.createElement("label",null,"Author"),r.a.createElement("input",{placeholder:"Ex: facebook",onChange:function(e){return l(e.target.value)}})),r.a.createElement(h.a.Field,null,r.a.createElement("label",null,"Repository"),r.a.createElement("input",{placeholder:"Ex: react",onChange:function(e){return E(e.target.value)}})),r.a.createElement(h.a.Field,null,r.a.createElement("label",null,"Authenicator"),r.a.createElement("input",{placeholder:"Ex: 0e181d0dffd8dd0e6359d......",onChange:function(e){return b(e.target.value)}})),r.a.createElement(d.a,{onClick:Object(s.a)(i.a.mark((function e(){var t,a,l,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H(n,u,v);case 2:t=e.sent,a=!1,console.log(t),t.forEach((function(e){0==e.value&&(a=!0)})),l=t.filter((function(e){return 0==e.value})).map((function(e){return r.a.createElement("div",null,e.type+": "+e.err.message,r.a.createElement("br",null))})),a?(R(l),G(!0)):(k=t[0].val,S=t[1].val,c=t[2].val,j=new O({auth:c}),A(!0),G(!1));case 8:case"end":return e.stop()}}),e)})))},"Submit")),r.a.createElement(f.a,null,r.a.createElement(f.a.Header,null,"How to get authenticated."),"Unfortunately Github limits the amount of API calls from unauthenticated users so in order for this application to work correctly you need your PAT (Personal Access Token)",r.a.createElement("br",null),r.a.createElement("a",{href:"https://docs.github.com/en/github/authenticating-to-github/creating-a-personal-access-token"},"Github Documentation"),r.a.createElement("br",null),"Only Read Access is required."),I?r.a.createElement(f.a,{negative:!0},r.a.createElement(f.a.Header,{negative:!0},"Errors"),r.a.createElement("p",null,M)):null,r.a.createElement(f.a,null,"Don't wanna make an authenicator just to try it out? Here is an example with just a click of a button!",r.a.createElement("br",null),r.a.createElement(d.a,{onClick:function(){}},"Example"))));return r.a.createElement("div",null,r.a.createElement("h1",{className:"title"},"Repository Viewer"),C?r.a.createElement(x,null):T)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[170,1,2]]]);
//# sourceMappingURL=main.29dbb91e.chunk.js.map